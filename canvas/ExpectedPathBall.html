<!DOCTYPE html>
<html lang="ko">
<head>
	<meta charset="UTF-8">
	<title>ExpectedPathBall</title>
	<style>
		html, body{width: 100%;height: 100%;margin: 0;padding: 0;display: flex;justify-content: center;align-items: center;background:#000; flex-direction: column;}
		#canvas{background:#fff;}
		div{color: #fff;}
		input{width: 3em;}
	</style>
</head>
<body>
	<canvas id="canvas" width="800" height="800"></canvas>
	<script><!-- 
		window.onload= _ =>{
			function ev (){//event
				canvas.addEventListener("mousedown", function (e){
					cx= e.pageX-canvas.offsetLeft;
					cy= e.pageY-canvas.offsetTop;
					if( Math.sqrt(Math.abs(cx-x)*Math.abs(cx-x)+Math.abs(cy-y)*Math.abs(cy-y)) <= radius )
					down= true;
				});
				window.addEventListener("mousemove", function (e){
					if(down){
						mx= e.pageX-canvas.offsetLeft;
						my= e.pageY-canvas.offsetTop;
						console.log(-(mx-cx));
						console.log(-(my-cy));
						DrawPath();
					}
				});
				window.addEventListener("mouseup", function (e){
					down= false;
				});
			}
			function clear (){//canvas clear
				ctx.clearRect(0,0,canvas.width, canvas.height);
			}
			function arc (x, y){//draw arc
				ctx.setLineDash([]);
				ctx.beginPath();
				ctx.arc(x, y, radius, 0, 2*Math.PI, false);//x, y, 반지름
				ctx.stroke();
				ctx.closePath();
				ctx.setLineDash([5, 3]);
			}
			function DrawPath (){
			}
			function play(){//play animation
				arc(x, y);
				clear();
				x+=vx;
				y+=vy;
				if(x+radius>=canvas.width || x<=radius){
					x= x+radius>=canvas.width? canvas.width-radius: radius;
					vx*= -1;
				}
				if(y+radius>=canvas.height || y<=radius){
					y= y+radius>=canvas.height? canvas.height-radius: radius;
					vy*= -1;
				}
				setTimeout(_ =>{
					play();
				}, 20);
			}
			const canvas= document.getElementById("canvas");
			const ctx= canvas.getContext('2d');
			const radius= 10;
			let x= canvas.width/2;//location
			let y= canvas.height/2;//location

			let cx=0, cy= 0;
			let mx=0, my= 0;
			let down= false;

			ctx.setLineDash([5, 3]);/*dashes are 5px and spaces are 3px*/
			ctx.lineCap= 'round';
			ctx.strokeStyle="#333";
			ctx.fillStyle="#333";

			ev();
			arc(x, y);
		}
	</script>
</body>
</html>